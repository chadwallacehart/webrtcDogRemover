<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>You have an alert</title>
    <style src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"></style>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="http://simplewebrtc.com/latest.js"></script>
</head>
<body>
<div id="remoteVideos"></div>
<button id="record">Record</button>
<button id="stop" hidden="hidden">Stop</button>
REST url:<input id="restUrl" type="text"/>
<button id="execute">Go</button>

<script>
    var room = location.pathname.split('/')[2]; //pull the roomname from the url

    socketio = io.connect();
    socketio.emit('join', room);

    console.log("room is " + room);
    var webrtc = new SimpleWebRTC({
        localVideoEl: 'localVideo',
        remoteVideosEl: 'remoteVideos',
        media: {audio: true, video: false},
        autoRequestMedia: true});

    webrtc.on('readyToCall', function () {
        webrtc.joinRoom(room);
        console.log('Joined room ' + room);
    });

    socketio.on('command', function(data){
        console.log("command: " + data);
    });

    socketio.on('videoReady', function(data){
        console.log("command: " + data);
        window.open(data);
    });

    $("#record").click(function(){
        console.log("record");
        socketio.emit("command", {command: "record", room: room});
        $("#stop").show();
        $("#record").hide();
    });

    $("#stop").click(function(){
        console.log("stop");
        socketio.emit("command", {command: "stop", room: room});
        $("#stop").prop("disabled",true)
    });

</script>
<script>



    //Call a rest command - used for ROVER control
    $('#execute').click(function(){
        $.get($("#restUrl").val(), function(data, status){
            console.log("GET status:" + status + " : " + data);
        })
    });
</script>

</body>
</html>